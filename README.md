# ‚ö° eSvitlo Monitor Bot

Multi-tenant Telegram –±–æ—Ç –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó –≤ –£–∫—Ä–∞—ó–Ω—ñ.

## üìã –û–ø–∏—Å

–ë–æ—Ç –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º:
- üìç –û–±—Ä–∞—Ç–∏ —Å–≤—ñ–π —Ä–µ–≥—ñ–æ–Ω —Ç–∞ —á–µ—Ä–≥—É –≤—ñ–¥–∫–ª—é—á–µ–Ω—å
- üìä –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å
- üîî –û—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –∑–º—ñ–Ω–∏ –≥—Ä–∞—Ñ—ñ–∫–∞
- ‚è∞ –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞–ª–µ—Ä—Ç–∏ –ø–µ—Ä–µ–¥ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º/–≤–∫–ª—é—á–µ–Ω–Ω—è–º —Å–≤—ñ—Ç–ª–∞
- üì∫ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –±–æ—Ç–∞ –¥–æ —Å–≤–æ–≥–æ Telegram –∫–∞–Ω–∞–ª—É

## üåç –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ä–µ–≥—ñ–æ–Ω–∏

- –ö–∏—ó–≤
- –ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å
- –î–Ω—ñ–ø—Ä–æ
- –û–¥–µ—Å–∞

–î–∞–Ω—ñ –æ—Ç—Ä–∏–º—É—é—Ç—å—Å—è –∑ [outage-data-ua](https://github.com/Baskerville42/outage-data-ua).

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –±–æ—Ç–∞

1. –ó–Ω–∞–π–¥—ñ—Ç—å –±–æ—Ç–∞ –≤ Telegram
2. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
3. –û–±–µ—Ä—ñ—Ç—å –≤–∞—à —Ä–µ–≥—ñ–æ–Ω —Ç–∞ —á–µ—Ä–≥—É
4. –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä –≤–∏ –±—É–¥–µ—Ç–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –∑–º—ñ–Ω–∏ –≥—Ä–∞—Ñ—ñ–∫–∞

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

- `/start` - –ü–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É –∑ –±–æ—Ç–æ–º
- `/schedule` –∞–±–æ üìã - –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫
- `/next` –∞–±–æ ‚è≠ - –ù–∞—Å—Ç—É–ø–Ω–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è/–≤–∫–ª—é—á–µ–Ω–Ω—è
- `/timer` –∞–±–æ ‚è∞ - –¢–∞–π–º–µ—Ä –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –ø–æ–¥—ñ—ó
- `/settings` –∞–±–æ ‚öôÔ∏è - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–æ—Ç–∞
- `/channel` –∞–±–æ üì∫ - –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∫–∞–Ω–∞–ª
- `/help` - –î–æ–≤—ñ–¥–∫–∞

## üõ†Ô∏è –î–µ–ø–ª–æ–π –Ω–∞ Railway

### –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather) —Ç–∞ –æ—Ç—Ä–∏–º–∞–π—Ç–µ —Ç–æ–∫–µ–Ω
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [Railway](https://railway.app/)

### –ö—Ä–æ–∫ 2: –î–µ–ø–ª–æ–π

1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **Deploy on Railway**:

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/new)

2. –ê–±–æ –∫–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —Ç–∞ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å –¥–æ Railway:

```bash
git clone https://github.com/Ivan200424/eSvitlo-monitor-bot.git
cd eSvitlo-monitor-bot
```

### –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–í Railway –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:

```env
BOT_TOKEN=your_telegram_bot_token
ADMIN_IDS=your_telegram_id,another_admin_id
CHECK_INTERVAL_MINUTES=3
TZ=Europe/Kyiv
DATABASE_PATH=/app/data/bot.db
```

### –ö—Ä–æ–∫ 4: Deploy

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–¥–µ–ø–ª–æ—ó—Ç—å –≤–∞—à –±–æ—Ç. –ó–∞—á–µ–∫–∞–π—Ç–µ –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω —ñ –±–æ—Ç –±—É–¥–µ –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏!

## üíª –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫

### –í–∏–º–æ–≥–∏

- Node.js 20+
- npm –∞–±–æ yarn

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
```bash
git clone https://github.com/Ivan200424/eSvitlo-monitor-bot.git
cd eSvitlo-monitor-bot
```

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
npm install
```

3. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `.env.example`:
```bash
cp .env.example .env
```

4. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å `.env` —Ñ–∞–π–ª –≤–∞—à–∏–º–∏ –¥–∞–Ω–∏–º–∏:
```env
BOT_TOKEN=your_bot_token_here
ADMIN_IDS=123456789
CHECK_INTERVAL_MINUTES=3
TZ=Europe/Kyiv
DATABASE_PATH=./data/bot.db
```

5. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞:
```bash
npm start
```

–î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º:
```bash
npm run dev
```

## üê≥ Docker

### –ó–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—É

```bash
docker build -t esvitlo-monitor-bot .
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker run -d \
  --name esvitlo-bot \
  -e BOT_TOKEN=your_token \
  -e ADMIN_IDS=your_id \
  -v $(pwd)/data:/app/data \
  esvitlo-monitor-bot
```

### Docker Compose

```yaml
version: '3.8'
services:
  bot:
    build: .
    environment:
      - BOT_TOKEN=${BOT_TOKEN}
      - ADMIN_IDS=${ADMIN_IDS}
      - CHECK_INTERVAL_MINUTES=3
      - TZ=Europe/Kyiv
    volumes:
      - ./data:/app/data
    restart: unless-stopped
```

–ó–∞–ø—É—Å–∫:
```bash
docker-compose up -d
```

## üë®‚Äçüíº –ê–¥–º—ñ–Ω –∫–æ–º–∞–Ω–¥–∏

–î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤ (–≤–∫–∞–∑–∞–Ω—ñ –≤ `ADMIN_IDS`):

- `/admin` - –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `/users` - –°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `/broadcast <–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è>` - –†–æ–∑—Å–∏–ª–∫–∞ –≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º
- `/system` - –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å–∏—Å—Ç–µ–º—É

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
src/
‚îú‚îÄ‚îÄ index.js              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îú‚îÄ‚îÄ bot.js                # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ config.js             # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ api.js                # –ó–∞–ø–∏—Ç–∏ –¥–æ outage-data-ua
‚îú‚îÄ‚îÄ parser.js             # –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ formatter.js          # –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
‚îú‚îÄ‚îÄ scheduler.js          # –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫
‚îú‚îÄ‚îÄ alerts.js             # –°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç—ñ–≤
‚îú‚îÄ‚îÄ utils.js              # –£—Ç–∏–ª—ñ—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ db.js             # –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ SQLite
‚îÇ   ‚îî‚îÄ‚îÄ users.js          # CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó
‚îÇ
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ start.js          # /start —Ç–∞ wizard
‚îÇ   ‚îú‚îÄ‚îÄ settings.js       # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ schedule.js       # –ì—Ä–∞—Ñ—ñ–∫
‚îÇ   ‚îú‚îÄ‚îÄ channel.js        # –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∫–∞–Ω–∞–ª—É
‚îÇ   ‚îî‚îÄ‚îÄ admin.js          # –ê–¥–º—ñ–Ω –∫–æ–º–∞–Ω–¥–∏
‚îÇ
‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îî‚îÄ‚îÄ inline.js         # Inline –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚îÇ
‚îî‚îÄ‚îÄ constants/
    ‚îî‚îÄ‚îÄ regions.js        # –†–µ–≥—ñ–æ–Ω–∏ —Ç–∞ —á–µ—Ä–≥–∏
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Node.js 20+** - Runtime
- **node-telegram-bot-api** - Telegram Bot API
- **better-sqlite3** - SQLite –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **node-cron** - –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–≤–¥–∞–Ω—å
- **axios** - HTTP –∑–∞–ø–∏—Ç–∏
- **dotenv** - –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

## üìù –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

–ë–æ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î SQLite –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:

- –†–µ–≥—ñ–æ–Ω —Ç–∞ —á–µ—Ä–≥–∞ –∫–æ–∂–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
- –ü—ñ–¥–∫–ª—é—á–µ–Ω—ñ –∫–∞–Ω–∞–ª–∏
- –Ü—Å—Ç–æ—Ä—ñ—è –æ–Ω–æ–≤–ª–µ–Ω—å –≥—Ä–∞—Ñ—ñ–∫—ñ–≤

## ‚öôÔ∏è –Ø–∫ –ø—Ä–∞—Ü—é—î –±–æ—Ç

1. **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–±–∏—Ä–∞—î —Ä–µ–≥—ñ–æ–Ω —Ç–∞ —á–µ—Ä–≥—É —á–µ—Ä–µ–∑ wizard
2. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**: –ë–æ—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≥—Ä–∞—Ñ—ñ–∫–∏ –∫–æ–∂–Ω—ñ 3 —Ö–≤–∏–ª–∏–Ω–∏
3. **–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è**: –ü—Ä–∏ –∑–º—ñ–Ω—ñ –≥—Ä–∞—Ñ—ñ–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
4. **–ê–ª–µ—Ä—Ç–∏**: –°–ø–æ–≤—ñ—â–∞—î –∑–∞ N —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è/–≤–∫–ª—é—á–µ–Ω–Ω—è
5. **–ö–∞–Ω–∞–ª–∏**: –ú–æ–∂–µ –ø–æ—Å—Ç–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ Telegram –∫–∞–Ω–∞–ª–∏

## ‚ùì FAQ

**Q: –°–∫—ñ–ª—å–∫–∏ –∫–æ—à—Ç—É—î –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞?**  
A: –ù–∞ Railway —î –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω. –î–ª—è —Ü—å–æ–≥–æ –±–æ—Ç–∞ –π–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ.

**Q: –ß–∏ –º–æ–∂—É —è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–æ—Ç–∞ –¥–ª—è –¥–µ–∫—ñ–ª—å–∫–æ—Ö —Ä–µ–≥—ñ–æ–Ω—ñ–≤?**  
A: –û–¥–∏–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á = –æ–¥–∏–Ω —Ä–µ–≥—ñ–æ–Ω + –æ–¥–Ω–∞ —á–µ—Ä–≥–∞. –î–ª—è —ñ–Ω—à–æ–≥–æ —Ä–µ–≥—ñ–æ–Ω—É —Å—Ç–≤–æ—Ä—ñ—Ç—å —ñ–Ω—à–∏–π Telegram –∞–∫–∞—É–Ω—Ç.

**Q: –Ø–∫ —á–∞—Å—Ç–æ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –¥–∞–Ω—ñ?**  
A: –ë–æ—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 3 —Ö–≤–∏–ª–∏–Ω–∏ (–Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è).

**Q: –ß–∏ –º–æ–∂—É —è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ –∫–∞–Ω–∞–ª—ñ–≤?**  
A: –û–¥–∏–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á = –æ–¥–∏–Ω –∫–∞–Ω–∞–ª. –î–ª—è –∫—ñ–ª—å–∫–æ—Ö –∫–∞–Ω–∞–ª—ñ–≤ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ä—ñ–∑–Ω—ñ Telegram –∞–∫–∞—É–Ω—Ç–∏.

**Q: –©–æ —Ä–æ–±–∏—Ç–∏ —è–∫—â–æ –±–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î?**  
A: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω–∏–π, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω –≤ `.env`, —á–∏ —î —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è.

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤—ñ–ª—å–Ω–æ!

## ü§ù –í–Ω–µ—Å–æ–∫

Pull requests –≤—ñ—Ç–∞—é—Ç—å—Å—è! –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –∑–º—ñ–Ω —Å–ø–æ—á–∞—Ç–∫—É –≤—ñ–¥–∫—Ä–∏–π—Ç–µ issue.

## üìß –ö–æ–Ω—Ç–∞–∫—Ç–∏

–Ø–∫—â–æ —É –≤–∞—Å —î –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó, —Å—Ç–≤–æ—Ä—ñ—Ç—å issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó.

---

–ó—Ä–æ–±–ª–µ–Ω–æ –∑ ‚ù§Ô∏è –¥–ª—è –£–∫—Ä–∞—ó–Ω–∏ üá∫üá¶
