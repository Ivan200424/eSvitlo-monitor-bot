# ğŸ“Š Capacity Planning - Visual Guide

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CAPACITY PLANNING SYSTEM                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  capacityLimits.js  â”‚â”€â”€â”€â–¶â”‚ capacityTracker.js   â”‚â”€â”€â”€â–¶â”‚ capacityMonitor.js   â”‚
â”‚                     â”‚    â”‚                      â”‚    â”‚                      â”‚
â”‚ â€¢ Define limits     â”‚    â”‚ â€¢ Track usage        â”‚    â”‚ â€¢ Check limits       â”‚
â”‚ â€¢ Validate config   â”‚    â”‚ â€¢ Per-minute countersâ”‚    â”‚ â€¢ Generate alerts    â”‚
â”‚ â€¢ Helper functions  â”‚    â”‚ â€¢ Real-time metrics  â”‚    â”‚ â€¢ Emergency mode     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚                            â”‚
                                     â”‚                            â”‚
                                     â–¼                            â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚  Integration     â”‚       â”‚  Alert Manager     â”‚
                           â”‚                  â”‚       â”‚                    â”‚
                           â”‚ â€¢ index.js       â”‚       â”‚ â€¢ 80% Warning      â”‚
                           â”‚ â€¢ powerMonitor   â”‚       â”‚ â€¢ 90% Critical     â”‚
                           â”‚ â€¢ publisher      â”‚       â”‚ â€¢ 100% Emergency   â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Load Units Tracked

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          LOAD CATEGORIES                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸ‘¥ USERS                                                                â”‚
â”‚  â”œâ”€â”€ Total Users                   [current/max]                        â”‚
â”‚  â”œâ”€â”€ Concurrent Active             [current/max]                        â”‚
â”‚  â”œâ”€â”€ Wizard Starts/min             [current/max]                        â”‚
â”‚  â””â”€â”€ Actions per User/min          [per-user limit]                     â”‚
â”‚                                                                          â”‚
â”‚  ğŸ“¢ CHANNELS                                                             â”‚
â”‚  â”œâ”€â”€ Total Channels                [current/max]                        â”‚
â”‚  â”œâ”€â”€ Publish Operations/min        [current/max]                        â”‚
â”‚  â””â”€â”€ Concurrent Operations         [current/max]                        â”‚
â”‚                                                                          â”‚
â”‚  ğŸŒ IP MONITORING (Most critical)                                       â”‚
â”‚  â”œâ”€â”€ Total IPs Monitored           [current/max]                        â”‚
â”‚  â”œâ”€â”€ Concurrent Pings              [current/max]                        â”‚
â”‚  â””â”€â”€ Pings/min                     [current/max]                        â”‚
â”‚                                                                          â”‚
â”‚  â° SCHEDULERS                                                           â”‚
â”‚  â”œâ”€â”€ Active Jobs                   [current/max]                        â”‚
â”‚  â””â”€â”€ Overlapping Jobs              [current/max]                        â”‚
â”‚                                                                          â”‚
â”‚  ğŸ’¬ MESSAGES                                                             â”‚
â”‚  â”œâ”€â”€ Messages/min (Global)         [current/max]                        â”‚
â”‚  â”œâ”€â”€ Per-Channel Messages/min      [current/max per channel]            â”‚
â”‚  â””â”€â”€ Queue Size                    [current/max]                        â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Alert Levels Flow

```
                         Capacity Usage
                              â”‚
                              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚         0% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 100%         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚            â”‚           â”‚          â”‚
           â”‚            â”‚           â”‚          â”‚
     0-79% â”‚      80%   â”‚     90%   â”‚    100%  â”‚
           â”‚            â”‚           â”‚          â”‚
           â–¼            â–¼           â–¼          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ NORMAL  â”‚  â”‚ WARNING â”‚ â”‚CRITICAL â”‚ â”‚EMERGENCYâ”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚            â”‚           â”‚          â”‚
          â”‚            â”‚           â”‚          â”‚
          â–¼            â–¼           â–¼          â–¼
     No action    Monitor     Prepare    Auto-pause
                  closely     for action  + Slowdown
                                          + Disable
```

## Alert Examples

### âš ï¸ WARNING (80%)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ ĞŸĞ¾Ğ¿ĞµÑ€ĞµĞ´Ğ¶ĞµĞ½Ğ½Ñ: IP Ğ°Ğ´Ñ€ĞµÑĞ¸ (Ğ¼Ğ¾Ğ½Ñ–Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³)            â”‚
â”‚                                                     â”‚
â”‚ Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ¾ 82.5% (1650/2000)                      â”‚
â”‚ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ”Ñ‚ÑŒÑÑ Ğ¼Ğ¾Ğ½Ñ–Ñ‚Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ñ–Ñ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”´ CRITICAL (90%)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾: ĞŸĞ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ/Ñ…Ğ²                       â”‚
â”‚                                                     â”‚
â”‚ Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ¾ 92.0% (920/1000)                       â”‚
â”‚ ĞĞµĞ¾Ğ±Ñ…Ñ–Ğ´Ğ½Ğ¾ Ğ²Ğ¶Ğ¸Ñ‚Ğ¸ Ğ·Ğ°Ñ…Ğ¾Ğ´Ñ–Ğ² Ğ´Ğ»Ñ Ğ·Ğ½Ğ¸Ğ¶ĞµĞ½Ğ½Ñ Ğ½Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸš¨ EMERGENCY (100%)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš¨ ĞĞ’ĞĞ Ğ†Ğ¯: ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ– (Ğ²ÑÑŒĞ¾Ğ³Ğ¾)                    â”‚
â”‚                                                     â”‚
â”‚ Ğ›Ğ†ĞœĞ†Ğ¢ ĞŸĞ•Ğ Ğ•Ğ’Ğ˜Ğ©Ğ•ĞĞ: 102.3% (10230/10000)             â”‚
â”‚ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ² Ğ°Ğ²Ğ°Ñ€Ñ–Ğ¹Ğ½Ğ¾Ğ¼Ñƒ Ñ€ĞµĞ¶Ğ¸Ğ¼Ñ–. Ğ¢ĞµÑ€Ğ¼Ñ–Ğ½Ğ¾Ğ²Ñ– Ğ´Ñ–Ñ— Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ñ–!â”‚
â”‚                                                     â”‚
â”‚ ĞĞ’Ğ¢ĞĞœĞĞ¢Ğ˜Ğ§ĞĞ† Ğ”Ğ†Ğ‡:                                    â”‚
â”‚ âœ“ Auto-pause Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¾                             â”‚
â”‚ âœ“ Scheduler ÑƒĞ¿Ğ¾Ğ²Ñ–Ğ»ÑŒĞ½ĞµĞ½Ğ¾ (Ã—2)                        â”‚
â”‚ âœ“ Non-critical Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ— Ğ²Ğ¸Ğ¼ĞºĞ½ĞµĞ½Ğ¾                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Emergency Mode Workflow

```
     Capacity â‰¥ 100%
            â”‚
            â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Enable Emergency â”‚
     â”‚      Mode        â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                            â”‚
            â–¼                            â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Auto-Pause   â”‚           â”‚   Slowdown    â”‚
     â”‚ Non-Critical â”‚           â”‚   Scheduler   â”‚
     â”‚              â”‚           â”‚   (Ã—2)        â”‚
     â”‚ â€¢ Statistics â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ â€¢ Analytics  â”‚                    â”‚
     â”‚ â€¢ Growth     â”‚                    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
            â”‚                            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Send Critical     â”‚
            â”‚  Alert to Admins   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚
              Capacity < 100%
                       â”‚
                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Restore Normal     â”‚
            â”‚    Operations      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Rate Limiting Example

### User Actions

```
User makes request
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check user action â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ count this minute â”‚â”€â”€â”€â”€â–¶â”‚ < 20 actions?   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ YES                           â”‚ NO
                â–¼                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Allow action â”‚              â”‚ Reject action  â”‚
        â”‚ Increment    â”‚              â”‚ Send message:  â”‚
        â”‚ counter      â”‚              â”‚ "Too many      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  actions..."   â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Configuration Example

```bash
# .env file

# Users
MAX_TOTAL_USERS=10000           # â†â”€â”€ System can handle max 10K users
MAX_CONCURRENT_USERS=500        # â†â”€â”€ Max 500 users active at once
MAX_WIZARD_PER_MINUTE=30        # â†â”€â”€ Max 30 wizard starts/min
MAX_ACTIONS_PER_USER_PER_MIN=20 # â†â”€â”€ Max 20 actions per user/min

# IP Monitoring (Critical - most resource intensive)
MAX_TOTAL_IPS=2000              # â†â”€â”€ Monitor max 2000 IP addresses
MAX_CONCURRENT_PINGS=100        # â†â”€â”€ Max 100 pings at same time
MAX_PINGS_PER_MINUTE=3000       # â†â”€â”€ Max 3000 pings/min globally

# Alert Thresholds
ALERT_WARNING_THRESHOLD=0.8     # â†â”€â”€ Alert at 80%
ALERT_CRITICAL_THRESHOLD=0.9    # â†â”€â”€ Alert at 90%
ALERT_EMERGENCY_THRESHOLD=1.0   # â†â”€â”€ Emergency at 100%
```

## Monitoring Dashboard (Conceptual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAPACITY DASHBOARD                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Users:     8,500/10,000  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 85% âš ï¸       â”‚
â”‚  Channels:  4,200/5,000   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 84%          â”‚
â”‚  IPs:       1,800/2,000   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 90% ğŸ”´       â”‚
â”‚  Messages:    850/1,000   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 85% âš ï¸       â”‚
â”‚                                                                 â”‚
â”‚  Emergency Mode: OFF âœ…                                         â”‚
â”‚                                                                 â”‚
â”‚  Recent Alerts:                                                 â”‚
â”‚  â€¢ 18:03 - WARNING: IPs approaching limit (90%)                â”‚
â”‚  â€¢ 18:01 - INFO: Capacity check completed                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Usage Example

```javascript
const capacityTracker = require('./monitoring/capacityTracker');

// Check if user can perform action
const canAct = capacityTracker.canUserAct(userId);
if (!canAct.allowed) {
  bot.sendMessage(userId, canAct.message);
  // â³ Ğ—Ğ°Ğ±Ğ°Ğ³Ğ°Ñ‚Ğ¾ Ğ´Ñ–Ğ¹ Ğ·Ğ° Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½Ñƒ. Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ñ‡ĞµÑ€ĞµĞ· ĞºÑ–Ğ»ÑŒĞºĞ° ÑĞµĞºÑƒĞ½Ğ´.
  return;
}

// Track the action
capacityTracker.trackUserAction(userId);

// Perform the action
// ... your code ...
```

## Testing Flow

```
Run: node test-capacity-planning.js
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Test 1: Configuration  â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 2: getLimit()     â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 3: Percentages    â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 4: Alert Levels   â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 5: Exceeded Check â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 6: Throttling     â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 7: Tracker        â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 8: Status         â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 9: User Limits    â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 10: Emergency     â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 11: All Statuses  â”‚ âœ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test 12: Summary       â”‚ âœ“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
âœ… All tests passed!
```

---

## Quick Reference

**Check Capacity Status:**
```javascript
const report = capacityMonitor.getCapacityReport();
console.log(report);
```

**Manual Emergency Mode:**
```javascript
capacityTracker.enableEmergencyMode();
// ... handle emergency ...
capacityTracker.disableEmergencyMode();
```

**Get Specific Metric:**
```javascript
const status = capacityTracker.getCapacityStatus('users', 'total');
console.log(`Users: ${status.current}/${status.max} (${status.percentageFormatted})`);
```

---

**Capacity Planning = Insurance for Growth** ğŸš€
