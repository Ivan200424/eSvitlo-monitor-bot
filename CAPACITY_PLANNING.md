# üìä Capacity Planning Implementation

## –û–≥–ª—è–¥

–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (Capacity Planning) –∑–∞–±–µ–∑–ø–µ—á—É—î –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –±–æ—Ç–∞ —à–ª—è—Ö–æ–º –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –±–µ–∑–ø–µ—á–Ω–∏—Ö –º–µ–∂ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. –¶–µ –∑–∞–ø–æ–±—ñ–≥–∞—î –¥–µ–≥—Ä–∞–¥–∞—Ü—ñ—ó UX —Ç–∞ –ø–∞–¥—ñ–Ω–Ω—é —Å–∏—Å—Ç–µ–º–∏ –ø—Ä–∏ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—ñ –ª—ñ–º—ñ—Ç—ñ–≤.

## –ü—Ä–∏–Ω—Ü–∏–ø–∏

‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–∏–Ω–Ω–∞:**
- –ó–Ω–∞—Ç–∏ —Å–≤–æ—ó –ª—ñ–º—ñ—Ç–∏
- –ù–µ –ø–µ—Ä–µ–≤–∏—â—É–≤–∞—Ç–∏ —ó—Ö
- –ü–æ–ø–µ—Ä–µ–¥–∂–∞—Ç–∏ –ø—Ä–æ –Ω–∞–±–ª–∏–∂–µ–Ω–Ω—è –¥–æ –º–µ–∂
- Graceful degradation –ø—Ä–∏ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ

‚ùå **–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ:**
- "–ù–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ" —Ü–∏–∫–ª–∏ –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—é
- –î–∏–Ω–∞–º—ñ—á–Ω–µ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–µ–∑ –º–µ–∂
- Silent degradation (–º–æ–≤—á–∞–∑–Ω–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü—ñ—è)

## –û–¥–∏–Ω–∏—Ü—ñ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (Load Units)

–°–∏—Å—Ç–µ–º–∞ –≤—ñ–¥—Å—Ç–µ–∂—É—î 5 –æ—Å–Ω–æ–≤–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:

### 1. üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- **Total users** - –∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- **Concurrent users** - –æ–¥–Ω–æ—á–∞—Å–Ω–æ –∞–∫—Ç–∏–≤–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- **Wizard starts/min** - –∑–∞–ø—É—Å–∫–∏ setup wizard –∑–∞ —Ö–≤–∏–ª–∏–Ω—É
- **Actions per user/min** - –¥—ñ—ó –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ —Ö–≤–∏–ª–∏–Ω—É

### 2. üì¢ –ö–∞–Ω–∞–ª–∏
- **Total channels** - –∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏—Ö –∫–∞–Ω–∞–ª—ñ–≤
- **Publish operations/min** - –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó –≤ –∫–∞–Ω–∞–ª–∏ –∑–∞ —Ö–≤–∏–ª–∏–Ω—É
- **Concurrent operations** - –æ–¥–Ω–æ—á–∞—Å–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –∫–∞–Ω–∞–ª–∞–º–∏

### 3. üåê IP –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ (–ö–†–ò–¢–ò–ß–ù–û - –Ω–∞–π–≤–∞–∂—á–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
- **Total IPs** - –∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å IP –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
- **Concurrent pings** - –æ–¥–Ω–æ—á–∞—Å–Ω—ñ ping-–∑–∞–ø–∏—Ç–∏
- **Pings/min** - –∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å ping –∑–∞ —Ö–≤–∏–ª–∏–Ω—É

### 4. ‚è∞ Scheduler
- **Active jobs** - –∞–∫—Ç–∏–≤–Ω—ñ –∑–∞–¥–∞—á—ñ scheduler
- **Running jobs** - –∑–∞–¥–∞—á—ñ —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –∑–∞—Ä–∞–∑
- **Overlaps** - –ø–µ—Ä–µ–∫—Ä–∏—Ç—Ç—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–¥–∞—á

### 5. üí¨ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- **Messages/min** - –≤–∏—Ö—ñ–¥–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–∞ —Ö–≤–∏–ª–∏–Ω—É
- **Per-channel messages/min** - –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞ –∫–∞–Ω–∞–ª –∑–∞ —Ö–≤–∏–ª–∏–Ω—É
- **Queue size** - —Ä–æ–∑–º—ñ—Ä —á–µ—Ä–≥–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- **Retries** - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–±

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ª—ñ–º—ñ—Ç—ñ–≤

–õ—ñ–º—ñ—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è —É `.env` —Ñ–∞–π–ª—ñ:

```bash
# –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
MAX_TOTAL_USERS=10000
MAX_CONCURRENT_USERS=500
MAX_WIZARD_PER_MINUTE=30
MAX_ACTIONS_PER_USER_PER_MIN=20

# –ö–∞–Ω–∞–ª–∏
MAX_TOTAL_CHANNELS=5000
MAX_CHANNELS_PER_USER=3
MAX_CHANNEL_PUBLISH_PER_MIN=100
MAX_CONCURRENT_CHANNEL_OPS=50

# IP –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
MAX_TOTAL_IPS=2000
MAX_IPS_PER_USER=3
MIN_PING_INTERVAL_SEC=2
MAX_CONCURRENT_PINGS=100
MAX_PINGS_PER_MINUTE=3000

# Scheduler
MAX_SCHEDULER_JOBS=10
MIN_SCHEDULER_INTERVAL_SEC=10
MAX_JOB_EXECUTION_TIME_SEC=60
MAX_SCHEDULER_OVERLAPS=2

# –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
MAX_MESSAGES_PER_MINUTE=1000
MAX_MSG_PER_CHANNEL_PER_MIN=20
MAX_MESSAGE_RETRIES=3
MAX_MESSAGE_QUEUE_SIZE=5000
```

## –†—ñ–≤–Ω—ñ –∞–ª–µ—Ä—Ç—ñ–≤

–°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä—É—î –∞–ª–µ—Ä—Ç–∏ –Ω–∞ —Ç—Ä—å–æ—Ö —Ä—ñ–≤–Ω—è—Ö:

### ‚ö†Ô∏è WARNING (80%)
- **–î—ñ—è:** –ü–æ—á–∞—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ —Å–∏—Ç—É–∞—Ü—ñ—é
- **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:** "‚ö†Ô∏è –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è: –Ω–∞–±–ª–∏–∂–µ–Ω–Ω—è –¥–æ –ª—ñ–º—ñ—Ç—É"
- **–°–∏—Å—Ç–µ–º–∞:** –ü—Ä–∞—Ü—é—î –Ω–æ—Ä–º–∞–ª—å–Ω–æ

### üî¥ CRITICAL (90%)
- **–î—ñ—è:** –ù–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–∂–∏—Ç–∏ –∑–∞—Ö–æ–¥—ñ–≤ –¥–ª—è –∑–Ω–∏–∂–µ–Ω–Ω—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:** "üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ: –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥—ñ—ó"
- **–°–∏—Å—Ç–µ–º–∞:** Throttling –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è, backpressure

### üö® EMERGENCY (100%)
- **–î—ñ—è:** –¢–µ—Ä–º—ñ–Ω–æ–≤—ñ –¥—ñ—ó! –°–∏—Å—Ç–µ–º–∞ –≤ –∞–≤–∞—Ä—ñ–π–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ
- **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:** "üö® –ê–í–ê–†–Ü–Ø: –ª—ñ–º—ñ—Ç –ø–µ—Ä–µ–≤–∏—â–µ–Ω–æ"
- **–°–∏—Å—Ç–µ–º–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–∞—É–∑–∞, –∑–Ω–∏–∂–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏, –≤–∏–º–∫–Ω–µ–Ω–Ω—è non-critical —Ñ—É–Ω–∫—Ü—ñ–π

## –ê–≤–∞—Ä—ñ–π–Ω–∏–π —Ä–µ–∂–∏–º (Emergency Mode)

–ü—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ 100% –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –¥—ñ—ó:
1. **Auto-pause** - –ø—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–Ω—è non-critical –æ–ø–µ—Ä–∞—Ü—ñ–π
2. **Scheduler slowdown** - –∑–Ω–∏–∂–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏ scheduler (√ó2 –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
3. **Disable non-critical** - –≤–∏–º–∫–Ω–µ–Ω–Ω—è:
   - Statistics collection
   - Analytics
   - Growth metrics

### –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è:
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É –∫–æ–ª–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–Ω–∏–∂—É—î—Ç—å—Å—è –Ω–∏–∂—á–µ 100%.

## –ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—ñ –ª—ñ–º—ñ—Ç—ñ–≤

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- **Rate limiting** - –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ –¥—ñ–π
- **–ü–æ—è—Å–Ω—é–≤–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
- **–ë–µ–∑ –ø–∞–¥—ñ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏**

–ü—Ä–∏–∫–ª–∞–¥:
```
‚è≥ –ó–∞–±–∞–≥–∞—Ç–æ –¥—ñ–π –∑–∞ —Ö–≤–∏–ª–∏–Ω—É. –°–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ –∫—ñ–ª—å–∫–∞ —Å–µ–∫—É–Ω–¥.
```

### –ö–∞–Ω–∞–ª–∏
- **–ß–µ—Ä–≥–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ–π** - –≤—ñ–¥–∫–ª–∞–¥–µ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞
- **Backpressure** - –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
- **–ü–æ—è—Å–Ω—é–≤–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è**

–ü—Ä–∏–∫–ª–∞–¥:
```
‚è≥ –î–æ—Å—è–≥–Ω—É—Ç–æ –ª—ñ–º—ñ—Ç –ø—É–±–ª—ñ–∫–∞—Ü—ñ–π. –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±—É–¥–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—ñ–∑–Ω—ñ—à–µ.
```

### IP –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- **–ó–Ω–∏–∂–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏** ping-–∑–∞–ø–∏—Ç—ñ–≤
- **–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è** ping-–æ–ø–µ—Ä–∞—Ü—ñ–π
- **–¢–∏–º—á–∞—Å–æ–≤–µ –≤–∏–º–∫–Ω–µ–Ω–Ω—è** IP engine –ø—Ä–∏ overload

### Messages
- **Queue** - —á–µ—Ä–≥–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- **Retry –∑ backoff** - –ø–æ–≤—Ç–æ—Ä–Ω—ñ —Å–ø—Ä–æ–±–∏ –∑ –∑–∞—Ç—Ä–∏–º–∫–æ—é
- **Drop non-critical** - —Å–∫–∏–¥–∞–Ω–Ω—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:

1. **capacityLimits.js** - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ª—ñ–º—ñ—Ç—ñ–≤
   - –í–∏–∑–Ω–∞—á–∞—î –≤—Å—ñ –º–µ–∂—ñ
   - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
   - Helper —Ñ—É–Ω–∫—Ü—ñ—ó

2. **capacityTracker.js** - –¢—Ä–µ–∫—ñ–Ω–≥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
   - –í—ñ–¥—Å—Ç–µ–∂—É—î –ø–æ—Ç–æ—á–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
   - Per-minute counters
   - Real-time metrics

3. **capacityMonitor.js** - –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –∞–ª–µ—Ä—Ç–∏
   - –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª—ñ–º—ñ—Ç—ñ–≤
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∞–ª–µ—Ä—Ç—ñ–≤
   - Emergency mode —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

4. **Integration** - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —É —Å–∏—Å—Ç–µ–º—É
   - index.js - —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
   - powerMonitor.js - IP ping tracking
   - publisher.js - channel message tracking

## API

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥—ñ—ó

```javascript
const capacityTracker = require('./monitoring/capacityTracker');

// –ß–∏ –º–æ–∂–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–∫–æ–Ω–∞—Ç–∏ –¥—ñ—é?
const canAct = capacityTracker.canUserAct(userId);
if (!canAct.allowed) {
  bot.sendMessage(userId, canAct.message);
  return;
}

// –ß–∏ –º–æ–∂–Ω–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ wizard?
const canWizard = capacityTracker.canStartWizard();
if (!canWizard.allowed) {
  bot.sendMessage(userId, canWizard.message);
  return;
}

// –ß–∏ –º–æ–∂–Ω–∞ –ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –≤ –∫–∞–Ω–∞–ª?
const canPublish = capacityTracker.canPublishToChannel(channelId);
if (!canPublish.allowed) {
  // Queue for later
  return;
}
```

### –¢—Ä–µ–∫—ñ–Ω–≥ –æ–ø–µ—Ä–∞—Ü—ñ–π

```javascript
// –¢—Ä–µ–∫—ñ–Ω–≥ wizard —Å—Ç–∞—Ä—Ç—É
capacityTracker.trackWizardStart();

// –¢—Ä–µ–∫—ñ–Ω–≥ –¥—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
capacityTracker.trackUserAction(userId);

// –¢—Ä–µ–∫—ñ–Ω–≥ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó –≤ –∫–∞–Ω–∞–ª
capacityTracker.trackChannelPublish(channelId);

// –¢—Ä–µ–∫—ñ–Ω–≥ IP ping
capacityTracker.trackIPPing(true);  // start
// ... ping operation ...
capacityTracker.trackIPPing(false); // end

// –¢—Ä–µ–∫—ñ–Ω–≥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
capacityTracker.trackMessage(channelId);
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É

```javascript
const capacityMonitor = require('./monitoring/capacityMonitor');

// –ü–æ–≤–Ω–∏–π –∑–≤—ñ—Ç –ø—Ä–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
const report = capacityMonitor.getCapacityReport();

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤–∞—Ä—ñ–π–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É
if (capacityTracker.isEmergencyMode()) {
  console.log('‚ö†Ô∏è System in emergency mode!');
}

// –°—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –º–µ—Ç—Ä–∏–∫–∏
const status = capacityTracker.getCapacityStatus('users', 'total');
console.log(`Users: ${status.current}/${status.max} (${status.percentageFormatted})`);
```

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤:
```bash
node test-capacity-planning.js
```

–¢–µ—Å—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:
- ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –ª—ñ–º—ñ—Ç—ñ–≤
- ‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤
- ‚úÖ –†—ñ–≤–Ω—ñ –∞–ª–µ—Ä—Ç—ñ–≤
- ‚úÖ –¢—Ä–µ–∫—ñ–Ω–≥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- ‚úÖ Rate limiting
- ‚úÖ –ê–≤–∞—Ä—ñ–π–Ω–∏–π —Ä–µ–∂–∏–º
- ‚úÖ –í—Å—ñ API –º–µ—Ç–æ–¥–∏

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É—î –≤–∞–∂–ª–∏–≤—ñ –ø–æ–¥—ñ—ó:

```
üìä Capacity Summary
  users: 8500/10000 (85%)
  channels: 4200/5000 (84%)
  ip: 1800/2000 (90%)
  messages: 850/1000/min
  emergencyMode: false
```

### –ê–ª–µ—Ä—Ç–∏

–ê–ª–µ—Ä—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è —á–µ—Ä–µ–∑ —ñ—Å–Ω—É—é—á—É —Å–∏—Å—Ç–µ–º—É alertManager:

```
‚ö†Ô∏è –ù–∞–±–ª–∏–∂–µ–Ω–Ω—è –¥–æ –ª—ñ–º—ñ—Ç—É: IP –∞–¥—Ä–µ—Å–∏ (–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥)
–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ 90.0% (1800/2000)
–ù–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–∂–∏—Ç–∏ –∑–∞—Ö–æ–¥—ñ–≤ –¥–ª—è –∑–Ω–∏–∂–µ–Ω–Ω—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
```

### –ú–µ—Ç—Ä–∏–∫–∏

Capacity –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑:
- `monitoringManager.getStatus()` - –∑–∞–≥–∞–ª—å–Ω–∏–π —Å—Ç–∞—Ç—É—Å
- `capacityMonitor.getCapacityReport()` - –¥–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç
- `capacityTracker.getUsageSummary()` - –ø—ñ–¥—Å—É–º–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## Definition of Done

Capacity planning –≤–≤–∞–∂–∞—î—Ç—å—Å—è –≥–æ—Ç–æ–≤–∏–º, —è–∫—â–æ:

- ‚úÖ –í—ñ–¥–æ–º—ñ –≤—Å—ñ –ª—ñ–º—ñ—Ç–∏
- ‚úÖ –í–æ–Ω–∏ –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ –≤ –∫–æ–¥—ñ
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–∞–¥–∞—î –ø—Ä–∏ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—ñ
- ‚úÖ –ê–ª–µ—Ä—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å (80%, 90%, 100%)
- ‚úÖ –Ñ –ø–ª–∞–Ω –¥—ñ–π –ø—Ä–∏ overload
- ‚úÖ Emergency mode –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- ‚úÖ –¢–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–∞

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### –ü—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ –ª—ñ–º—ñ—Ç—ñ–≤:

1. **80% (Warning)**
   - –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ growth metrics
   - –ü—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏—Å—å –¥–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–æ–¥—É

2. **90% (Critical)**
   - –ó–±—ñ–ª—å—à–∏—Ç–∏ –ª—ñ–º—ñ—Ç–∏ —á–µ—Ä–µ–∑ .env
   - –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
   - –ú–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É

3. **100% (Emergency)**
   - –¢–µ—Ä–º—ñ–Ω–æ–≤–µ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –ª—ñ–º—ñ—Ç—ñ–≤
   - –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
   - –ê–Ω–∞–ª—ñ–∑ –ø—Ä–∏—á–∏–Ω –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω:

```bash
# –í–µ–ª–∏–∫–∏–π –±–æ—Ç (10K+ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)
MAX_TOTAL_USERS=50000
MAX_TOTAL_CHANNELS=25000
MAX_TOTAL_IPS=10000
MAX_PINGS_PER_MINUTE=15000
MAX_MESSAGES_PER_MINUTE=5000

# –ú–∞–ª–∏–π –±–æ—Ç (<1K –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)
MAX_TOTAL_USERS=1000
MAX_TOTAL_CHANNELS=500
MAX_TOTAL_IPS=200
MAX_PINGS_PER_MINUTE=600
MAX_MESSAGES_PER_MINUTE=200
```

## –ü–æ–¥–∞–ª—å—à–∏–π —Ä–æ–∑–≤–∏—Ç–æ–∫

–ú–æ–∂–ª–∏–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:

- [ ] –î–∏–Ω–∞–º—ñ—á–Ω–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –ª—ñ–º—ñ—Ç—ñ–≤
- [ ] –Ü—Å—Ç–æ—Ä—ñ—è capacity metrics —É –ë–î
- [ ] Dashboard –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- [ ] Predictive alerts –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç—Ä–µ–Ω–¥—ñ–≤
- [ ] Auto-scaling integration
- [ ] Per-user resource quotas
- [ ] Advanced queueing strategies

---

**Capacity planning ‚Äî —Ü–µ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è.**
