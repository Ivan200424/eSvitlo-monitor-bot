# Visual Guide: Power Notification Target Settings

## Feature Overview
Users can now choose where to receive notifications about power state changes (light on/off).

---

## 1. Settings Menu - New Button Added

### Main Settings Screen (Updated)
```
âš™ï¸ ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ

ĞŸĞ¾Ñ‚Ğ¾Ñ‡Ğ½Ñ– Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¸:

ğŸ“ Ğ ĞµĞ³Ñ–Ğ¾Ğ½: ĞšĞ¸Ñ—Ğ² â€¢ 1.1
ğŸ“º ĞšĞ°Ğ½Ğ°Ğ»: @mychannel âœ…
ğŸ“¡ IP: 192.168.1.1 âœ…
ğŸ”” Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ: ÑƒĞ²Ñ–Ğ¼ĞºĞ½ĞµĞ½Ğ¾ âœ…

ĞšĞµÑ€ÑƒĞ²Ğ°Ğ½Ğ½Ñ:

[ğŸ“ Ğ ĞµĞ³Ñ–Ğ¾Ğ½]              [ğŸ“º ĞšĞ°Ğ½Ğ°Ğ»]
[ğŸ“¡ IP]                  [ğŸ”” Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ]
[ğŸ”” ĞšÑƒĞ´Ğ¸ ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰Ğ°Ñ‚Ğ¸]      â† NEW BUTTON âœ¨
[ğŸ—‘ Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ Ğ²ÑÑ– Ğ´Ğ°Ğ½Ñ–]
[â† ĞĞ°Ğ·Ğ°Ğ´]                [â¤´ï¸ ĞœĞµĞ½Ñ]
```

---

## 2. Notification Target Menu

### When User Taps "ğŸ”” ĞšÑƒĞ´Ğ¸ ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰Ğ°Ñ‚Ğ¸"

**Example 1: Default Setting (Both)**
```
ğŸ”” Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ ÑĞ²Ñ–Ñ‚Ğ»Ğ¾

ĞšÑƒĞ´Ğ¸ Ğ¿ÑƒĞ±Ğ»Ñ–ĞºÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ 
ÑƒĞ²Ñ–Ğ¼ĞºĞ½ĞµĞ½Ğ½Ñ/Ğ²Ğ¸Ğ¼ĞºĞ½ĞµĞ½Ğ½Ñ ÑĞ²Ñ–Ñ‚Ğ»Ğ°?

ĞŸĞ¾Ñ‚Ğ¾Ñ‡Ğ½Ğµ: ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ»

[ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚]
[ğŸ“º Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»]
[âœ“ ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ»]    â† Checkmark shows current selection
[â† ĞĞ°Ğ·Ğ°Ğ´]
```

**Example 2: Bot Only Selected**
```
ğŸ”” Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ ÑĞ²Ñ–Ñ‚Ğ»Ğ¾

ĞšÑƒĞ´Ğ¸ Ğ¿ÑƒĞ±Ğ»Ñ–ĞºÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ 
ÑƒĞ²Ñ–Ğ¼ĞºĞ½ĞµĞ½Ğ½Ñ/Ğ²Ğ¸Ğ¼ĞºĞ½ĞµĞ½Ğ½Ñ ÑĞ²Ñ–Ñ‚Ğ»Ğ°?

ĞŸĞ¾Ñ‚Ğ¾Ñ‡Ğ½Ğµ: ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚

[âœ“ ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚]        â† Checkmark
[ğŸ“º Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»]
[ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ»]
[â† ĞĞ°Ğ·Ğ°Ğ´]
```

**Example 3: Channel Only Selected**
```
ğŸ”” Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ ÑĞ²Ñ–Ñ‚Ğ»Ğ¾

ĞšÑƒĞ´Ğ¸ Ğ¿ÑƒĞ±Ğ»Ñ–ĞºÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ 
ÑƒĞ²Ñ–Ğ¼ĞºĞ½ĞµĞ½Ğ½Ñ/Ğ²Ğ¸Ğ¼ĞºĞ½ĞµĞ½Ğ½Ñ ÑĞ²Ñ–Ñ‚Ğ»Ğ°?

ĞŸĞ¾Ñ‚Ğ¾Ñ‡Ğ½Ğµ: ğŸ“º Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»

[ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚]
[âœ“ ğŸ“º Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»]      â† Checkmark
[ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ»]
[â† ĞĞ°Ğ·Ğ°Ğ´]
```

---

## 3. User Interaction Flow

### Step-by-Step User Journey

1ï¸âƒ£ **User opens Settings**
```
User taps: âš™ï¸ ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ
â†’ Settings menu appears
```

2ï¸âƒ£ **User finds new button**
```
User sees: [ğŸ”” ĞšÑƒĞ´Ğ¸ ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰Ğ°Ñ‚Ğ¸]
User taps button
â†’ Notification target menu appears
```

3ï¸âƒ£ **User sees current setting**
```
Current setting is highlighted with âœ“
User sees three options
```

4ï¸âƒ£ **User changes setting**
```
User taps: [ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚]
â†’ Confirmation popup appears
```

5ï¸âƒ£ **Confirmation**
```
âœ… Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾: ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚
(Small notification at top)

Menu updates immediately:
[âœ“ ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚]        â† Checkmark moved
[ğŸ“º Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»]
[ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ»]
[â† ĞĞ°Ğ·Ğ°Ğ´]
```

---

## 4. How It Affects Notifications

### Scenario 1: "ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚" Selected

**When Power Goes OFF:**
```
Personal Chat:
ğŸ”´ 23:45 Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ·Ğ½Ğ¸ĞºĞ»Ğ¾
ğŸ•“ Ğ’Ğ¾Ğ½Ğ¾ Ğ±ÑƒĞ»Ğ¾ 3 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ 12 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
ğŸ—“ Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ¼Ğ°Ñ” Ğ·'ÑĞ²Ğ¸Ñ‚Ğ¸ÑÑ: 02:00

Channel:
(No message sent) â† User's choice
```

**When Power Comes ON:**
```
Personal Chat:
ğŸŸ¢ 02:03 Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ·'ÑĞ²Ğ¸Ğ»Ğ¾ÑÑ
ğŸ•“ Ğ™Ğ¾Ğ³Ğ¾ Ğ½Ğµ Ğ±ÑƒĞ»Ğ¾ 2 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ 18 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
ğŸ—“ ĞĞ°ÑÑ‚ÑƒĞ¿Ğ½Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²Ğµ: 08:00 - 11:00

Channel:
(No message sent) â† User's choice
```

---

### Scenario 2: "ğŸ“º Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»" Selected

**When Power Goes OFF:**
```
Personal Chat:
(No message sent) â† User's choice

Channel (@mychannel):
ğŸ”´ 23:45 Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ·Ğ½Ğ¸ĞºĞ»Ğ¾
ğŸ•“ Ğ’Ğ¾Ğ½Ğ¾ Ğ±ÑƒĞ»Ğ¾ 3 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ 12 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
ğŸ—“ Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ¼Ğ°Ñ” Ğ·'ÑĞ²Ğ¸Ñ‚Ğ¸ÑÑ: 02:00
```

**When Power Comes ON:**
```
Personal Chat:
(No message sent) â† User's choice

Channel (@mychannel):
ğŸŸ¢ 02:03 Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ·'ÑĞ²Ğ¸Ğ»Ğ¾ÑÑ
ğŸ•“ Ğ™Ğ¾Ğ³Ğ¾ Ğ½Ğµ Ğ±ÑƒĞ»Ğ¾ 2 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ 18 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
ğŸ—“ ĞĞ°ÑÑ‚ÑƒĞ¿Ğ½Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²Ğµ: 08:00 - 11:00
```

---

### Scenario 3: "ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ»" Selected (DEFAULT)

**When Power Goes OFF:**
```
Personal Chat:
ğŸ”´ 23:45 Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ·Ğ½Ğ¸ĞºĞ»Ğ¾
ğŸ•“ Ğ’Ğ¾Ğ½Ğ¾ Ğ±ÑƒĞ»Ğ¾ 3 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ 12 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
ğŸ—“ Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ¼Ğ°Ñ” Ğ·'ÑĞ²Ğ¸Ñ‚Ğ¸ÑÑ: 02:00

Channel (@mychannel):
ğŸ”´ 23:45 Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ·Ğ½Ğ¸ĞºĞ»Ğ¾
ğŸ•“ Ğ’Ğ¾Ğ½Ğ¾ Ğ±ÑƒĞ»Ğ¾ 3 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ 12 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
ğŸ—“ Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ¼Ğ°Ñ” Ğ·'ÑĞ²Ğ¸Ñ‚Ğ¸ÑÑ: 02:00
```

**When Power Comes ON:**
```
Personal Chat:
ğŸŸ¢ 02:03 Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ·'ÑĞ²Ğ¸Ğ»Ğ¾ÑÑ
ğŸ•“ Ğ™Ğ¾Ğ³Ğ¾ Ğ½Ğµ Ğ±ÑƒĞ»Ğ¾ 2 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ 18 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
ğŸ—“ ĞĞ°ÑÑ‚ÑƒĞ¿Ğ½Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²Ğµ: 08:00 - 11:00

Channel (@mychannel):
ğŸŸ¢ 02:03 Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ·'ÑĞ²Ğ¸Ğ»Ğ¾ÑÑ
ğŸ•“ Ğ™Ğ¾Ğ³Ğ¾ Ğ½Ğµ Ğ±ÑƒĞ»Ğ¾ 2 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ 18 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
ğŸ—“ ĞĞ°ÑÑ‚ÑƒĞ¿Ğ½Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²Ğµ: 08:00 - 11:00
```

---

## 5. Edge Cases & Special Behaviors

### Case 1: User Has No Channel Connected
```
Setting: "ğŸ“º Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»"
Behavior: Same as "ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚"
         (Messages only go to personal chat)
```

### Case 2: Channel is Paused
```
Setting: "ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ»"
Channel Status: Paused â¸
Behavior: 
  âœ… Messages sent to personal chat
  âŒ Messages NOT sent to channel (respects pause)
```

### Case 3: User Switches Settings Mid-Outage
```
Before: "ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚"
Power goes OFF â†’ Message sent to bot only

User changes to: "ğŸ“º Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»"
Power comes ON â†’ Message sent to channel only

Each event respects the setting at that moment.
```

---

## 6. Button States & Visual Feedback

### Normal State (Not Selected)
```
[ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚]
```

### Selected State (With Checkmark)
```
[âœ“ ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚]
   â†‘ Visual indicator
```

### After Tap (Confirmation Popup)
```
âœ… Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾: ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚
â†‘ Small notification appears briefly at top
```

### Error State (If Database Update Fails)
```
âŒ ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ
â†‘ Alert popup (show_alert: true)
```

---

## 7. Complete User Flow Diagram

```
Settings Menu
     â”‚
     â”œâ”€â†’ [ğŸ”” ĞšÑƒĞ´Ğ¸ ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰Ğ°Ñ‚Ğ¸] â”€â”€â†’ Notification Target Menu
                                          â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â†“                    â†“                     â†“
            [ğŸ“± Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‚]  [ğŸ“º Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»]  [ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ»]
                     â”‚                    â”‚                     â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â†“
                              Update Database (users.power_notify_target)
                                          â”‚
                                          â†“
                              âœ… Show Confirmation
                                          â”‚
                                          â†“
                              Update UI with Checkmark
```

---

## 8. Default Behavior Summary

| User Type | Default Setting | Where Notifications Go |
|-----------|----------------|------------------------|
| New user | ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ» | Bot + Channel (if connected) |
| Existing user | ğŸ“±ğŸ“º Ğ’ Ğ±Ğ¾Ñ‚ Ñ– ĞºĞ°Ğ½Ğ°Ğ» | Bot + Channel (if connected) |
| No channel | Any setting | Always to bot only |
| Channel paused | Any setting with channel | Bot only (channel ignored) |

---

## 9. UI/UX Improvements

### What Makes This Feature User-Friendly:

âœ… **Clear Visual Feedback**: Checkmark shows current selection  
âœ… **Instant Updates**: Menu updates immediately after selection  
âœ… **Confirmation**: Success message confirms the change  
âœ… **Intuitive Icons**: Emojis make options immediately recognizable  
âœ… **Consistent Placement**: Logically positioned in Settings menu  
âœ… **Error Handling**: Clear error messages if something goes wrong  
âœ… **Back Navigation**: Easy to return to settings  

---

## 10. Accessibility Notes

- **Clear Labels**: Each option has descriptive text
- **Visual Indicators**: Checkmark (âœ“) clearly shows selection
- **Consistent Navigation**: Standard back button behavior
- **Error Messages**: Clear feedback when operations fail
- **Confirmation**: User always knows when setting changes

---

**Feature Status**: âœ… Production Ready  
**Last Updated**: February 2026  
**Version**: 1.0
