# –ó–ú–Ü–ù–ò –î–õ–Ø DEFINITION OF DONE - –ö–û–†–û–¢–ö–ò–ô –î–û–í–Ü–î–ù–ò–ö

## –©–æ –±—É–ª–æ –∑–º—ñ–Ω–µ–Ω–æ

### 1. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ Wizard Deadlock üîÑ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–∞—Å—Ç—Ä—è–≥–∞–ª–∏ –≤ wizard –±–µ–∑ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≤–∏—Ö–æ–¥—É

**–†—ñ—à–µ–Ω–Ω—è:**
- `/start` —Ç–µ–ø–µ—Ä —Å–∫–∏–¥–∞—î wizard state –∑–∞–º—ñ—Å—Ç—å –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
- –î–æ–¥–∞–Ω–æ `/reset` —è–∫ alias –¥–ª—è `/start`
- Wizard state –º–∞—î —Ç–∞–π–º–∞—É—Ç 24 –≥–æ–¥–∏–Ω–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö wizard —Å—Ç–∞–Ω—ñ–≤ –∫–æ–∂–Ω—É –≥–æ–¥–∏–Ω—É

**–§–∞–π–ª–∏:**
- `src/handlers/start.js` - –ª–æ–≥—ñ–∫–∞ —Å–∫–∏–¥–∞–Ω–Ω—è
- `src/bot.js` - –¥–æ–¥–∞–Ω–æ –∫–æ–º–∞–Ω–¥—É `/reset`

---

### 2. –î–æ–¥–∞–Ω–æ –Ω–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω—ñ –∫–Ω–æ–ø–∫–∏ –¥–æ –≤—Å—ñ—Ö –ø–æ–º–∏–ª–æ–∫ üîò

**–ü—Ä–æ–±–ª–µ–º–∞:** 28 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑–∞–ª–∏—à–∞–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –±–µ–∑ –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó

**–†—ñ—à–µ–Ω–Ω—è:**
- –°—Ç–≤–æ—Ä–µ–Ω–æ 3 –Ω–æ–≤—ñ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏:
  - `getSetupRequiredKeyboard()` - –¥–ª—è –ø–æ–º–∏–ª–æ–∫ "–ø–æ—Ç—Ä—ñ–±–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"
  - `getPermissionDeniedKeyboard()` - –¥–ª—è –ø–æ–º–∏–ª–æ–∫ –¥–æ—Å—Ç—É–ø—É
  - –ü–æ–∫—Ä–∞—â–µ–Ω–æ `getErrorKeyboard()` - –¥–ª—è –∑–∞–≥–∞–ª—å–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏:**
- `src/handlers/schedule.js` - 6 –ø–æ–º–∏–ª–æ–∫
- `src/handlers/settings.js` - 2 –ø–æ–º–∏–ª–∫–∏
- `src/handlers/channel.js` - 3 –ø–æ–º–∏–ª–∫–∏
- `src/handlers/admin.js` - 8 –ø–æ–º–∏–ª–æ–∫ –¥–æ—Å—Ç—É–ø—É
- `src/keyboards/inline.js` - –Ω–æ–≤—ñ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏

---

### 3. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ —ñ—Å–Ω—É—é—á—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ ‚úÖ

–¶—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤–∂–µ –±—É–ª–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω—ñ:

#### –¢–∞–π–º–∞—É—Ç–∏ —Ç–∞ –æ—á–∏—Å—Ç–∫–∞
- ‚úÖ IP setup: 5-—Ö–≤–∏–ª–∏–Ω–Ω–∏–π —Ç–∞–π–º–∞—É—Ç
- ‚úÖ Channel pending: 30-—Ö–≤–∏–ª–∏–Ω–Ω–∏–π —Ç–∞–π–º–∞—É—Ç + –æ—á–∏—Å—Ç–∫–∞ >24–≥–æ–¥
- ‚úÖ –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ Maps –∫–æ–∂–Ω—É –≥–æ–¥–∏–Ω—É

#### Pause Mode
- ‚úÖ –¢–∏–ø–∏ –ø–∞—É–∑–∏: üõ† –û–Ω–æ–≤–ª–µ–Ω–Ω—è, üö® –ê–≤–∞—Ä—ñ—è, üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- ‚úÖ –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è wizard —Ç–∞ –¥—ñ–π –∑ –∫–∞–Ω–∞–ª–æ–º
- ‚úÖ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å —á–µ—Ä–µ–∑ database settings

#### –î–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
- ‚úÖ SHA256 hash –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ (–æ–∫—Ä–µ–º–æ today/tomorrow)
- ‚úÖ 9 —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó
- ‚úÖ –î–µ–Ω—å transition –±–µ–∑ —Ñ–µ–π–∫–æ–≤–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å

#### IP –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ Debounce 5 —Ö–≤–∏–ª–∏–Ω (–Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è)
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è IP/DDNS
- ‚úÖ Timeout 10 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø–∏—Ç

---

## –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

**–Ø–∫—â–æ –∑–∞—Å—Ç—Ä—è–≥–ª–∏ –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö:**
1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `/start` –∞–±–æ `/reset`
2. –ë–æ—Ç —Å–∫–∏–Ω–µ –≤—Å—ñ pending states
3. –í–∏ –ø–æ–≤–µ—Ä–Ω–µ—Ç–µ—Å—å –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é

**–Ø–∫—â–æ –±–∞—á–∏—Ç–µ –ø–æ–º–∏–ª–∫—É:**
1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É "‚öôÔ∏è –ü–æ—á–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è" (—è–∫—â–æ –±–æ—Ç –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π)
2. –ê–±–æ "üîÑ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ" (—è–∫—â–æ —Å—Ç–∞–ª–∞—Å—è —Ç–∏–º—á–∞—Å–æ–≤–∞ –ø–æ–º–∏–ª–∫–∞)
3. –ê–±–æ "üè† –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é" (—â–æ–± –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å)

### –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤

**Pause Mode:**
```
/admin ‚Üí –ü–∞—É–∑–∞ ‚Üí –û–±—Ä–∞—Ç–∏ —Ç–∏–ø:
- üõ† –û–Ω–æ–≤–ª–µ–Ω–Ω—è
- üö® –ê–≤–∞—Ä—ñ—è  
- üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
```
/setdebounce 5       # –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ debounce –Ω–∞ 5 —Ö–≤–∏–ª–∏–Ω
/getdebounce         # –ø–æ–¥–∏–≤–∏—Ç–∏—Å—å –ø–æ—Ç–æ—á–Ω–∏–π debounce
/setinterval 15      # –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä–≤–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≥—Ä–∞—Ñ—ñ–∫–∞
```

---

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ wizard timeout

```javascript
// Wizard state –≤–∫–ª—é—á–∞—î timestamp
{
  step: 'region',
  mode: 'new',
  timestamp: Date.now()  // <-- –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—î—Ç—å—Å—è
}

// –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –∫–æ–∂–Ω—É –≥–æ–¥–∏–Ω—É
setInterval(() => {
  const timeoutThreshold = Date.now() - WIZARD_TIMEOUT_MS; // 24 –≥–æ–¥–∏–Ω–∏
  for (const [telegramId, state] of wizardState.entries()) {
    if (state.timestamp < timeoutThreshold) {
      clearWizardState(telegramId);
    }
  }
}, 60 * 60 * 1000);
```

### –ù–æ–≤—ñ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏

```javascript
// –î–ª—è –ø–æ–º–∏–ª–æ–∫ "–ø–æ—Ç—Ä—ñ–±–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"
function getSetupRequiredKeyboard() {
  return {
    reply_markup: {
      inline_keyboard: [
        [{ text: '‚öôÔ∏è –ü–æ—á–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è', callback_data: 'back_to_main' }]
      ]
    }
  };
}

// –î–ª—è –ø–æ–º–∏–ª–æ–∫ –¥–æ—Å—Ç—É–ø—É
function getPermissionDeniedKeyboard() {
  return {
    reply_markup: {
      inline_keyboard: [
        [{ text: 'üè† –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é', callback_data: 'back_to_main' }]
      ]
    }
  };
}
```

### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```javascript
// –†–∞–Ω—ñ—à–µ (–±–µ–∑ –∫–Ω–æ–ø–æ–∫)
await safeSendMessage(bot, chatId, '‚ùå –°–ø–æ—á–∞—Ç–∫—É –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ—é /start');

// –¢–µ–ø–µ—Ä (–∑ –∫–Ω–æ–ø–∫–∞–º–∏)
await safeSendMessage(
  bot, 
  chatId, 
  '‚ùå –°–ø–æ—á–∞—Ç–∫—É –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ—é /start',
  getSetupRequiredKeyboard()
);
```

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ wizard reset

1. –ü–æ—á–∞—Ç–∏ wizard: `/start`
2. –û–±—Ä–∞—Ç–∏ —Ä–µ–≥—ñ–æ–Ω
3. –ù–ï –∑–∞–≤–µ—Ä—à—É–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
4. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ `/start` –∑–Ω–æ–≤—É
5. ‚úÖ –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∫–∏–Ω—É—Ç–æ"
6. ‚úÖ –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é –∞–±–æ –ø–æ—á–∞—Ç–∏ wizard –∑–∞–Ω–æ–≤–æ

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—é –≤ –ø–æ–º–∏–ª–∫–∞—Ö

1. –í–∏–π—Ç–∏ –∑ –±–æ—Ç–∞ (–Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á)
2. –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ `/schedule`
3. ‚úÖ –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ –∫–Ω–æ–ø–∫—É "‚öôÔ∏è –ü–æ—á–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"
4. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ –∫–Ω–æ–ø–∫—É
5. ‚úÖ –ú–∞—î –ø–µ—Ä–µ–π—Ç–∏ –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é –∞–±–æ wizard

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ timeout wizard

1. –ü–æ—á–∞—Ç–∏ wizard
2. –ù–ï –∑–∞–≤–µ—Ä—à—É–≤–∞—Ç–∏ –ø—Ä–æ—Ç—è–≥–æ–º 24 –≥–æ–¥–∏–Ω
3. ‚úÖ Wizard state –º–∞—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—á–∏—Å—Ç–∏—Ç–∏—Å—å
4. `/start` –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

---

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è

```bash
# Wizard cleanup
grep "–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞: –≤–∏–¥–∞–ª–µ–Ω–æ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π wizard —Å—Ç–∞–Ω" logs.txt

# Pending channels cleanup  
grep "–û—á–∏—â–µ–Ω–æ —Å—Ç–∞—Ä–∏—Ö —Å—Ç–∞–Ω—ñ–≤" logs.txt

# Schedule deduplication
grep "–ì—Ä–∞—Ñ—ñ–∫–∏ –Ω–µ –∑–º—ñ–Ω–∏–ª–∏—Å—è" logs.txt

# Pause mode
grep "Pause action" logs.txt
```

### Metrics –¥–ª—è —Å—Ç–µ–∂–µ–Ω–Ω—è

- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∏—Ö wizard —Å—Ç–∞–Ω—ñ–≤
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å pending channels
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–∏—Ö –ø—É–±–ª—ñ–∫–∞—Ü—ñ–π (—á–µ—Ä–µ–∑ –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—é)
- –ß–∞—Å —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É

---

## FAQ

**Q: –ß–∏ –≤—Ç—Ä–∞—Ç—è—Ç—å—Å—è –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—Ä–∏ /start reset?**  
A: –ù—ñ. Reset –æ—á–∏—â–∞—î —Ç—ñ–ª—å–∫–∏ wizard state, IP setup state —ñ conversation state. –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (—Ä–µ–≥—ñ–æ–Ω, —á–µ—Ä–≥–∞, –∫–∞–Ω–∞–ª) –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è.

**Q: –©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º —è–∫–∏–π –∑–∞–ª–∏—à–∏–≤ wizard –Ω–∞ 25 –≥–æ–¥–∏–Ω?**  
A: Wizard state –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å—Å—è. –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É `/start` –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–º–æ–∂–µ –ø–æ—á–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–Ω–æ–≤—É.

**Q: –ß–∏ –ø—Ä–∞—Ü—é—î debounce –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞?**  
A: –¢–∞–∫. IP setup states –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ë–î —ñ –≤—ñ–¥–Ω–æ–≤–ª—é—é—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ. –ê–ª–µ —Ç–∞–π–º–µ—Ä–∏ –Ω–µ –≤—ñ–¥–Ω–æ–≤–ª—é—é—Ç—å—Å—è (–≤–æ–Ω–∏ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏).

**Q: –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ pause mode –∞–∫—Ç–∏–≤–Ω–∞?**  
A: –ö–æ–º–∞–Ω–¥–∞ `/admin` –ø–æ–∫–∞–∑—É—î –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å –ø–∞—É–∑–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤.

**Q: –Ø–∫ –¥–æ–≤–≥–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è pending channels?**  
A: 30 —Ö–≤–∏–ª–∏–Ω –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∂–∏—Ç—Ç—è. –ü—ñ—Å–ª—è 24 –≥–æ–¥–∏–Ω - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –±–æ—Ç–∞.

---

## –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

- üí¨ –û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è: https://t.me/c/3857764385/2
- ü§ñ –ë–æ—Ç: [@svitlochekbot](https://t.me/svitlochekbot)
- üìù GitHub: https://github.com/Ivan200424/eSvitlo-monitor-bot

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ:** 2026-02-06  
**–í–µ—Ä—Å—ñ—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ —Ä–µ–ª—ñ–∑—É
